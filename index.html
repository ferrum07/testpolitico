<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test de Afinidad Pol칤tica Espa침a - Neutral</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
        }
        /* Colores corporativos */
        .color-sumar { color: #E51C55; }
        .color-psoe { color: #E30613; }
        .color-pp { color: #0056A3; }
        .color-vox { color: #63BE21; }
        
        .bg-sumar { background-color: #E51C55; }
        .bg-psoe { background-color: #E30613; }
        .bg-pp { background-color: #0056A3; }
        .bg-vox { background-color: #63BE21; }

        .slide-in {
            animation: slideIn 0.3s ease-out forwards;
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .btn-option {
            transition: all 0.2s;
        }
        .btn-option:active {
            transform: scale(0.99);
        }
        
        .party-logo-main {
            height: 120px;
            width: auto;
            object-fit: contain;
            display: block;
            margin: 0 auto;
        }
        .party-logo-small {
            height: 24px;
            width: 24px;
            object-fit: contain;
            margin-right: 8px;
        }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <!-- Contenedor Principal -->
    <div class="bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden min-h-[600px] flex flex-col relative border border-gray-100">
        
        <!-- Header -->
        <div class="bg-slate-800 text-white p-6 text-center shadow-md">
            <h1 class="text-2xl font-bold tracking-tight">Br칰jula Electoral</h1>
            <p class="text-slate-300 text-sm mt-1">An치lisis de posicionamiento pol칤tico en 30 cuestiones</p>
        </div>

        <!-- Pantalla de Inicio -->
        <div id="start-screen" class="flex-1 flex flex-col items-center justify-center p-8 text-center space-y-6">
            <div class="text-6xl mb-2">丘뒲잺</div>
            <h2 class="text-xl font-semibold text-gray-800">Test de Afinidad Pol칤tica</h2>
            <p class="text-gray-600 max-w-md">Este cuestionario compara tus respuestas con los programas electorales oficiales de los principales partidos de 치mbito nacional.</p>
            <div class="text-xs text-gray-500 bg-gray-50 p-3 rounded border border-gray-200">
                <strong>Nota:</strong> Las opciones se presentan en orden aleatorio para garantizar la neutralidad.
            </div>
            <button onclick="startQuiz()" class="px-8 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                Iniciar Cuestionario
            </button>
        </div>

        <!-- Pantalla de Preguntas -->
        <div id="quiz-screen" class="hidden flex-1 flex flex-col p-6">
            <!-- Barra de progreso -->
            <div class="w-full bg-gray-100 rounded-full h-2 mb-8">
                <div id="progress-bar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            
            <div class="flex-1 flex flex-col justify-center">
                <div class="mb-4">
                    <span id="question-number" class="text-xs font-bold text-blue-600 uppercase tracking-wider bg-blue-50 px-2 py-1 rounded">Pregunta 1/30</span>
                </div>
                
                <h2 id="question-text" class="text-xl md:text-2xl font-bold text-gray-800 mb-8 leading-snug">
                    <!-- Pregunta insertada por JS -->
                </h2>

                <div id="options-container" class="space-y-3">
                    <!-- Opciones insertadas por JS -->
                </div>
            </div>
        </div>

        <!-- Pantalla de Resultados -->
        <div id="result-screen" class="hidden flex-1 flex flex-col p-6 slide-in overflow-y-auto max-h-[90vh]">
            <h2 class="text-2xl font-bold text-center text-gray-800 mb-2">An치lisis de Resultados</h2>
            <p class="text-center text-gray-500 mb-6 text-sm">Basado en la coincidencia program치tica:</p>

            <!-- Contenedor del Ganador -->
            <div id="winner-container" class="text-center mb-8 p-8 bg-gray-50 rounded-xl border border-gray-100 flex flex-col items-center justify-center transition-all">
                
                <img id="winner-logo" 
                     src="" 
                     alt="Logo Partido" 
                     class="party-logo-main mb-4" 
                     onerror="handleImageError(this)">
                
                <div id="winner-fallback-icon" class="text-5xl mb-3 hidden">游늵</div>
                
                <h3 id="winner-name" class="text-3xl font-black mt-2 tracking-tight">Partido</h3>
                <p id="winner-percent" class="text-gray-500 font-mono mt-2 text-sm uppercase tracking-wide">Mayor coincidencia</p>
            </div>

            <div class="space-y-5" id="bars-container">
                <!-- Barras de resultados -->
            </div>

            <button onclick="location.reload()" class="mt-10 w-full py-3 bg-slate-800 text-white rounded-lg hover:bg-slate-900 transition font-medium">
                Reiniciar Test
            </button>
        </div>

    </div>

    <script>
        // CONFIGURACI칍N DE IM츼GENES
        const partyData = {
            sumar: {
                name: "SUMAR",
                local: "SUMAR.png", 
                online: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f6/Sumar_logo.svg/320px-Sumar_logo.svg.png",
                colorText: "color-sumar",
                colorBg: "bg-sumar"
            },
            psoe: {
                name: "PSOE",
                local: "PSOE.png",
                online: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Logotipo_del_PSOE.svg/320px-Logotipo_del_PSOE.svg.png",
                colorText: "color-psoe",
                colorBg: "bg-psoe"
            },
            pp: {
                name: "PARTIDO POPULAR",
                local: "PP.png",
                online: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Logo_PP_2019_azul.svg/320px-Logo_PP_2019_azul.svg.png",
                colorText: "color-pp",
                colorBg: "bg-pp"
            },
            vox: {
                name: "VOX",
                local: "VOX.png",
                online: "https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/Vox_logo.svg/320px-Vox_logo.svg.png",
                colorText: "color-vox",
                colorBg: "bg-vox"
            }
        };

        /* PREGUNTAS NEUTRALIZADAS:
           Se han reescrito para reflejar argumentos pol칤ticos leg칤timos y programas electorales,
           evitando terminolog칤a peyorativa ("chiringuito", "adoctrinamiento", "fanatismo", etc).
        */
        const questions = [
            // --- ECONOM칈A Y FISCALIDAD ---
            {
                text: "Pol칤tica fiscal e impuestos a grandes patrimonios y banca:",
                options: [
                    { text: "Deben ser permanentes y progresivos para financiar el Estado del Bienestar.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Son necesarios coyunturalmente, pero deben evaluarse seg칰n la situaci칩n econ칩mica.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Deben reducirse o eliminarse para fomentar la inversi칩n y el crecimiento.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "Bajada generalizada de impuestos para reducir la carga fiscal sobre las familias.", points: { sumar: 0, psoe: 0, pp: 2, vox: 3 } }
                ]
            },
            {
                text: "Salario M칤nimo Interprofesional (SMI):",
                options: [
                    { text: "Debe seguir aumentando por ley hasta alcanzar el 60% del salario medio.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Debe actualizarse, pero buscando siempre el consenso en el di치logo social.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Su subida debe ser prudente para no afectar a la contrataci칩n en pymes.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "El Estado no deber칤a intervenir los salarios, es competencia del mercado.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Sistema de Pensiones y Edad de Jubilaci칩n:",
                options: [
                    { text: "Revalorizaci칩n autom치tica con el IPC y blindaje constitucional.", points: { sumar: 2, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Permitir la jubilaci칩n anticipada en trabajos penosos sin penalizaci칩n.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Garantizar la sostenibilidad priorizando la jubilaci칩n activa y el empleo.", points: { sumar: 0, psoe: 1, pp: 3, vox: 0 } },
                    { text: "Reducir el gasto p칰blico estructural y fomentar el ahorro privado complementario.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Jornada Laboral:",
                options: [
                    { text: "Reducci칩n legal de la jornada m치xima sin reducci칩n salarial.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Avanzar hacia la reducci칩n de jornada mediante negociaci칩n colectiva.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Flexibilidad horaria acordada entre empresa y trabajador, no por imposici칩n.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "La prioridad debe ser mejorar la productividad, no reducir horas por ley.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },

            // --- SERVICIOS P칔BLICOS ---
            {
                text: "Gesti칩n de la Sanidad P칰blica:",
                options: [
                    { text: "Gesti칩n exclusivamente p칰blica y reversi칩n de externalizaciones.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Reforzar el sistema p칰blico como pilar fundamental del estado.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Colaboraci칩n p칰blico-privada para mejorar la eficiencia y reducir listas de espera.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Unificaci칩n de la tarjeta sanitaria y recentralizaci칩n de competencias.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Educaci칩n Concertada (Fondos p칰blicos a gesti칩n privada):",
                options: [
                    { text: "Priorizar la educaci칩n p칰blica y reducir progresivamente los conciertos.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Mantener el sistema actual garantizando la equidad en el acceso.", points: { sumar: 0, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Blindar la libertad de elecci칩n de centro por parte de los padres.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Implantar el cheque escolar para garantizar la libre elecci칩n real.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Ley de Vivienda y Alquileres:",
                options: [
                    { text: "Regulaci칩n de precios obligatoria en zonas tensionadas.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Incentivos fiscales a propietarios que bajen el alquiler y m치s vivienda p칰blica.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Aumentar la oferta liberando suelo y dando seguridad jur칤dica al propietario.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Derogaci칩n de la Ley de Vivienda actual por ser intervencionista.", points: { sumar: 0, psoe: 0, pp: 2, vox: 3 } }
                ]
            },

            // --- DERECHOS Y SOCIEDAD ---
            {
                text: "Ley Trans y derechos LGTBI:",
                options: [
                    { text: "Defensa plena de la autodeterminaci칩n de g칠nero y despatologizaci칩n.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Mantener la legislaci칩n vigente que garantiza derechos civiles.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Revisar la ley para garantizar seguridad jur칤dica y protecci칩n del menor.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Derogaci칩n de leyes que consideren contrarias a la biolog칤a o la familia tradicional.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Legislaci칩n sobre Violencia de G칠nero:",
                options: [
                    { text: "Es una violencia estructural que requiere pol칤ticas espec칤ficas y transversales.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Reforzar el Pacto de Estado y la protecci칩n a las v칤ctimas.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Combatir toda violencia dom칠stica, manteniendo protecci칩n espec칤fica.", points: { sumar: 0, psoe: 0, pp: 3, vox: 0 } },
                    { text: "Ley de Violencia Intrafamiliar que trate a todas las v칤ctimas por igual.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Interrupci칩n Voluntaria del Embarazo (Aborto):",
                options: [
                    { text: "Garantizarlo en la red p칰blica y eliminar periodos de reflexi칩n obligatorios.", points: { sumar: 3, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Mantener la ley de plazos actual y el acceso a partir de los 16 a침os.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Apoyo a la maternidad y respeto al derecho a la vida.", points: { sumar: 0, psoe: 0, pp: 2, vox: 2 } },
                    { text: "Defensa de la vida desde la concepci칩n y fomento de la natalidad.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Memoria Democr치tica:",
                options: [
                    { text: "Profundizar en la reparaci칩n de las v칤ctimas y retirar simbolog칤a.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Cumplimiento de la ley actual para cerrar heridas del pasado.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Centrarse en la concordia y no utilizar la historia como arma pol칤tica.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Derogaci칩n de la Ley de Memoria Democr치tica por considerarla sectaria.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Eutanasia:",
                options: [
                    { text: "Es un derecho civil consolidado que debe garantizarse.", points: { sumar: 3, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Mantener la regulaci칩n actual con sus garant칤as m칠dicas.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Priorizar una Ley de Cuidados Paliativos integral.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Defensa de la vida hasta su t칠rmino natural.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },

            // --- MODELO TERRITORIAL ---
            {
                text: "Modelo Territorial y Catalu침a:",
                options: [
                    { text: "Reconocimiento de la plurinacionalidad y di치logo pol칤tico.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Convivencia dentro del marco constitucional y el di치logo.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Defensa del Estado de las Autonom칤as y la igualdad entre espa침oles.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Recuperaci칩n de competencias por parte del Estado central.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Lenguas Cooficiales:",
                options: [
                    { text: "Promoci칩n y protecci칩n activa de todas las lenguas del Estado.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Normalidad democr치tica en su uso en instituciones.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "El espa침ol es la lengua com칰n y debe garantizarse su uso vehicular.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Garantizar el derecho a estudiar exclusivamente en espa침ol en todo el territorio.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Jefatura del Estado (Monarqu칤a/Rep칰blica):",
                options: [
                    { text: "Aspiraci칩n hacia un modelo republicano.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Respeto al pacto constitucional vigente sobre la Monarqu칤a Parlamentaria.", points: { sumar: 1, psoe: 3, pp: 2, vox: 0 } },
                    { text: "Defensa de la Monarqu칤a como garante de estabilidad.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "La Corona es s칤mbolo fundamental de la unidad de Espa침a.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },

            // --- INMIGRACI칍N Y SEGURIDAD ---
            {
                text: "Gesti칩n de la Inmigraci칩n:",
                options: [
                    { text: "V칤as legales y seguras, con enfoque en derechos humanos e integraci칩n.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Equilibrio entre control de fronteras, cooperaci칩n en origen y solidaridad.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Inmigraci칩n legal vinculada al mercado laboral y control fronterizo.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Prioridad nacional y endurecimiento de los requisitos de entrada y permanencia.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Ocupaci칩n de Viviendas:",
                options: [
                    { text: "Distingir entre familias vulnerables y mafias. Proteger a los vulnerables.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Agilizar los procesos judiciales garantizando la seguridad jur칤dica.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Desalojo expr칠s en 24 horas y endurecimiento de penas.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "Tolerancia cero y defensa de la propiedad privada ante todo.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },

            // --- MEDIO AMBIENTE Y ENERG칈A ---
            {
                text: "Transici칩n Energ칠tica y Cambio Clim치tico:",
                options: [
                    { text: "Acelerar la descarbonizaci칩n y aumentar la ambici칩n clim치tica.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Transici칩n justa, apostando por las energ칤as renovables.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Compromiso medioambiental compatible con el crecimiento econ칩mico.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Rechazo a las imposiciones clim치ticas que perjudican al sector primario.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Energ칤a Nuclear:",
                options: [
                    { text: "Cierre programado y apuesta total por renovables.", points: { sumar: 3, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Respetar el calendario de cierre pactado con las empresas.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Extender la vida 칰til de las centrales existentes como energ칤a de respaldo.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "Considerar la energ칤a nuclear como estrat칠gica para la soberan칤a energ칠tica.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Agenda 2030:",
                options: [
                    { text: "Es una hoja de ruta esencial para el desarrollo sostenible.", points: { sumar: 3, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Compromiso con sus objetivos de desarrollo y sostenibilidad.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Revisi칩n de aquellos puntos que afecten a la competitividad agr칤cola.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Oposici칩n a agendas globales que limitan la soberan칤a nacional.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Caza y Tauromaquia:",
                options: [
                    { text: "Mayor protecci칩n animal y regulaci칩n estricta de estas actividades.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "B칰squeda de equilibrio entre bienestar animal y tradiciones.", points: { sumar: 0, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Apoyo a la caza y la tauromaquia como parte del patrimonio cultural.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "Defensa sin complejos de las tradiciones rurales y la caza.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },

            // --- POL칈TICA INTERNACIONAL ---
            {
                text: "Uni칩n Europea:",
                options: [
                    { text: "Mayor integraci칩n pol칤tica, fiscal y social europea.", points: { sumar: 3, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Europa federal y refuerzo de las instituciones comunitarias.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Defensa de los intereses de Espa침a dentro de la UE actual.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Priorizar la soberan칤a de los estados miembro frente a Bruselas.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Conflicto Israel - Palestina:",
                options: [
                    { text: "Reconocimiento del Estado Palestino y exigencia de derechos humanos.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Soluci칩n de los dos Estados y apoyo a la legalidad internacional.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Apoyo a Israel como estado democr치tico y derecho a su defensa.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "Alineamiento claro con Israel y lucha contra el terrorismo.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },

            // --- INSTITUCIONES Y OTROS ---
            {
                text: "Religi칩n y Estado:",
                options: [
                    { text: "Avanzar hacia un Estado plenamente laico.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Aconfesionalidad del Estado manteniendo relaciones de cooperaci칩n.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Respeto a la tradici칩n y ra칤ces cristianas en la vida p칰blica.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "Defensa de los valores cristianos como base de la civilizaci칩n occidental.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Pol칤ticas de Igualdad:",
                options: [
                    { text: "Son prioritarias y deben tener rango ministerial propio.", points: { sumar: 3, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Son fundamentales para la democracia y deben ser transversales.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Deben enfocarse en la igualdad de oportunidades real, sin cuotas.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Eliminaci칩n de ministerios espec칤ficos y gasto superfluo en esta materia.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Ley de Seguridad Ciudadana (Ley Mordaza):",
                options: [
                    { text: "Derogaci칩n para garantizar el derecho a la protesta.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Reforma de los aspectos que limiten derechos fundamentales.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Mantenimiento de la ley para garantizar el orden y seguridad.", points: { sumar: 0, psoe: 0, pp: 3, vox: 2 } },
                    { text: "Mayor protecci칩n jur칤dica y respaldo a las Fuerzas y Cuerpos de Seguridad.", points: { sumar: 0, psoe: 0, pp: 1, vox: 3 } }
                ]
            },
            {
                text: "Financiaci칩n de Autov칤as:",
                options: [
                    { text: "Financiaci칩n v칤a impuestos generales, fomentando el transporte p칰blico.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Modelo de 'quien contamina paga' para mantenimiento viario.", points: { sumar: 1, psoe: 3, pp: 0, vox: 0 } },
                    { text: "Oposici칩n a la implantaci칩n de peajes en autov칤as existentes.", points: { sumar: 0, psoe: 1, pp: 3, vox: 3 } }, // Consenso en oposici칩n a veces
                    { text: "Rechazo a nuevas tasas que graven la movilidad privada.", points: { sumar: 0, psoe: 0, pp: 2, vox: 3 } }
                ]
            },
            {
                text: "Financiaci칩n Auton칩mica:",
                options: [
                    { text: "Armonizaci칩n fiscal para evitar competencia desleal entre comunidades.", points: { sumar: 3, psoe: 2, pp: 0, vox: 0 } },
                    { text: "Sistema basado en la solidaridad interterritorial y suficiencia.", points: { sumar: 1, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Autonom칤a fiscal para que las comunidades puedan bajar impuestos.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Recentralizaci칩n o reducci칩n dr치stica del gasto auton칩mico.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            },
            {
                text: "Visi칩n de Espa침a:",
                options: [
                    { text: "Pa칤s plurinacional y diverso.", points: { sumar: 3, psoe: 1, pp: 0, vox: 0 } },
                    { text: "Naci칩n de ciudadanos libres e iguales en derechos.", points: { sumar: 0, psoe: 3, pp: 1, vox: 0 } },
                    { text: "Naci칩n constitucional indisoluble.", points: { sumar: 0, psoe: 0, pp: 3, vox: 1 } },
                    { text: "Una sola naci칩n, patria com칰n e indivisible.", points: { sumar: 0, psoe: 0, pp: 0, vox: 3 } }
                ]
            }
        ];

        let currentQuestion = 0;
        let scores = { sumar: 0, psoe: 0, pp: 0, vox: 0 };

        function startQuiz() {
            document.getElementById('start-screen').classList.add('hidden');
            document.getElementById('quiz-screen').classList.remove('hidden');
            renderQuestion();
        }

        // Funci칩n Fisher-Yates Shuffle
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function handleImageError(imgElement) {
            let partyKey = null;
            for (const key in partyData) {
                if (imgElement.src.includes(partyData[key].local)) {
                    partyKey = key;
                    break;
                }
            }
            if (!partyKey) partyKey = imgElement.getAttribute('data-party');

            if (partyKey && imgElement.src !== partyData[partyKey].online) {
                imgElement.src = partyData[partyKey].online;
            } else {
                imgElement.style.display = 'none';
                document.getElementById('winner-fallback-icon').classList.remove('hidden');
                document.getElementById('winner-fallback-icon').style.display = 'block';
            }
        }

        function renderQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('question-number').innerText = `PREGUNTA ${currentQuestion + 1}/${questions.length}`;
            document.getElementById('question-text').innerText = q.text;
            
            const percentage = ((currentQuestion) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${percentage}%`;

            const container = document.getElementById('options-container');
            container.innerHTML = '';
            
            container.classList.remove('slide-in');
            void container.offsetWidth; 
            container.classList.add('slide-in');

            const shuffledOptions = shuffleArray([...q.options]);

            shuffledOptions.forEach((opt) => {
                const btn = document.createElement('button');
                btn.className = 'btn-option w-full text-left p-4 rounded-lg border border-gray-200 hover:border-blue-500 hover:bg-blue-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:bg-white text-gray-700 font-medium text-lg bg-white shadow-sm';
                btn.innerText = opt.text;
                btn.onclick = () => handleAnswer(opt.points);
                container.appendChild(btn);
            });
        }

        function handleAnswer(points) {
            scores.sumar += points.sumar;
            scores.psoe += points.psoe;
            scores.pp += points.pp;
            scores.vox += points.vox;

            currentQuestion++;

            if (currentQuestion < questions.length) {
                renderQuestion();
            } else {
                showResult();
            }
        }

        function showResult() {
            document.getElementById('quiz-screen').classList.add('hidden');
            document.getElementById('result-screen').classList.remove('hidden');

            const totalPoints = scores.sumar + scores.psoe + scores.pp + scores.vox;
            const winnerKey = Object.keys(scores).reduce((a, b) => scores[a] > scores[b] ? a : b);
            const winnerData = partyData[winnerKey];

            const winnerEl = document.getElementById('winner-name');
            winnerEl.innerText = winnerData.name;
            winnerEl.className = `text-3xl md:text-4xl font-black mt-2 tracking-tight ${winnerData.colorText}`;
            
            document.getElementById('winner-percent').innerText = `${scores[winnerKey]} Puntos acumulados`;

            const logoImg = document.getElementById('winner-logo');
            logoImg.setAttribute('data-party', winnerKey); 
            logoImg.src = winnerData.local; 
            logoImg.classList.remove('hidden');
            document.getElementById('winner-fallback-icon').classList.add('hidden');

            const barsContainer = document.getElementById('bars-container');
            const sortedKeys = Object.keys(scores).sort((a, b) => scores[b] - scores[a]);
            const maxScore = scores[winnerKey];

            barsContainer.innerHTML = ''; 

            sortedKeys.forEach(key => {
                const score = scores[key];
                const pData = partyData[key];
                const widthPercent = maxScore === 0 ? 0 : (score / maxScore) * 100;

                const html = `
                    <div class="mb-4">
                        <div class="flex justify-between mb-1 items-center">
                            <span class="font-bold ${pData.colorText} flex items-center text-sm md:text-base">
                                <img src="${pData.local}" 
                                     class="party-logo-small" 
                                     onerror="this.src='${pData.online}'">
                                ${pData.name}
                            </span>
                            <span class="text-gray-500 font-mono text-xs md:text-sm bg-gray-100 px-2 py-0.5 rounded">${score} pts</span>
                        </div>
                        <div class="w-full bg-gray-100 rounded-full h-3 overflow-hidden">
                            <div class="${pData.colorBg} h-3 rounded-full transition-all duration-1000 ease-out" style="width: ${widthPercent}%"></div>
                        </div>
                    </div>
                `;
                barsContainer.innerHTML += html;
            });
        }
    </script>
</body>
</html>
